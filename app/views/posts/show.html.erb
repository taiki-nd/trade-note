<div class="space"></div>

<div class="content">
<div class="space"></div>

<p class="title"><%= @post.title %></p>
<p class="created_by">created by <%= link_to @post.user.nickname, "/users/#{@post.user.nickname}", {class: "link_to_user"} %></p>
<div class="markdown_content">
  <%= markdown(@post.content) %>
</div>

<% if user_signed_in? && current_user.id == @post.user_id %>
  <div class="container">
    <h2>投稿者専用エリア</h2>
    <div class="btns">
      <div data-turbolinks="false">
        <%= link_to 'Edit', edit_post_path(@post), class: "btn" %>
      </div>
      <div>
        <%= link_to 'Back', posts_path, class: "btn" %>
      </div>
    </div>
  </div>
<% end %>

<div class="container">
  <h2>コメント</h2>
  <% if user_signed_in? %>
    <%= form_with model: [@post, @comment_post],url: post_comment_posts_path(@post), local: false do |form| %>
      <%= form.text_area :comment, placeholder: "コメントする", rows: "2" %>
      <%= form.submit "SEND" %>
    <% end %>
  <% else %>
    <div class="btns">
      <%= link_to "新規登録してコメントする", new_user_registration_path, class: "btn" %>
      <%= link_to "ログインしてコメントする", new_user_session_path, class: "btn" %>
    </div>
  <% end %>
  <div>
    <%#<i class="fas fa-eye like-btn"></i>_<%= @record.impressions_count %>
  </div>
  
  <div class="comments">
    <h3>＜コメント一覧＞</h3>
    <div id="comments__area">
      <%= render partial: 'comment_posts/index', locals: { comments: @comment_posts } %>
    </div>
  </div>
</div>

</div>

<div class="space"></div>